# 🍔 키오스크 메뉴 시스템

## 📋 프로젝트 개요
60세 이상 어르신을 위한 음성 기반 키오스크 메뉴 시스템입니다. 얼굴 인식으로 나이를 판별하고, 어르신 모드에서는 음성으로 메뉴를 주문할 수 있습니다.

## 🚀 주요 기능

### 👴 어르신 모드 (60세 이상)
- **음성 주문**: 알레르기, 식단, 카테고리 설정을 음성으로 진행
- **음성 챗봇**: 메뉴 추천 및 장바구니 관리를 도와주는 AI 어시스턴트
- **자동 필터링**: 설정된 조건에 맞는 메뉴만 표시

### 👤 일반 모드 (60세 미만)
- **일반 메뉴**: 터치 기반 메뉴 선택
- **필터링**: 알레르기, 식단, 카테고리별 메뉴 필터링

## 🛠️ 설치 및 설정

### 1. 필요한 라이브러리 설치
```bash
pip install -r requirements.txt
```

### 2. OpenAI API 키 설정
프로젝트 루트에 `.env` 파일을 생성하고 다음 내용을 추가하세요:

```env
# OpenAI API 설정
OPENAI_API_KEY=your_openai_api_key_here

# 음성 어시스턴트 설정
VOICE_ASSISTANT_MODEL=gpt-4o-mini
VOICE_ASSISTANT_TEMPERATURE=0.7
VOICE_ASSISTANT_MAX_TOKENS=300
```

### 3. 앱 실행
```bash
streamlit run app.py
```

## 🎤 음성 챗봇 사용법

### 시작하기
1. 어르신 모드로 진입 (60세 이상 얼굴 인식)
2. 음성 주문 완료 후 "🎤 음성 챗봇 시작하기" 버튼 클릭
3. AI 어시스턴트가 음성으로 안내

### 음성 명령어
- **🍽️ 메뉴 추천**: "맛있는 메뉴 추천해줘", "인기 메뉴 알려줘"
- **🛒 장바구니 추가**: "햄버거 담아줘", "치킨 추가해줘"
- **📋 메뉴 정보**: "햄버거 가격이 얼마야?", "치킨 조리시간은?"
- **🚫 알레르기 확인**: "이 메뉴에 달걀 들어있어?"
- **❓ 도움말**: "도움말", "어떻게 사용해?"
- **🔚 종료**: "종료", "끝", "그만", "나가기"

## 🔧 기술 스택

### 음성 처리
- **STT (Speech-to-Text)**: OpenAI Whisper API
- **TTS (Text-to-Speech)**: OpenAI TTS API
- **음성 녹음**: sounddevice, pygame

### AI 모델
- **GPT-4o-mini**: 음성 챗봇 응답 생성
- **Whisper**: 음성 인식
- **TTS-1**: 음성 합성

### 웹 프레임워크
- **Streamlit**: 사용자 인터페이스
- **OpenCV**: 얼굴 인식
- **DeepFace**: 나이 추정

## 📁 프로젝트 구조

```
streamlit-kiosk/
├── app.py                          # 메인 애플리케이션
├── elderly_voice_assistant.py      # 어르신용 음성 챗봇
├── voice_ordering.py               # 음성 주문 시스템
├── menu_data.py                    # 메뉴 데이터
├── utils/
│   └── deepface_webcam.py         # 얼굴 인식
├── voice/                          # 음성 관련 모듈
├── public/                         # 이미지 파일
└── requirements.txt                # 의존성 목록
```

## 🎯 사용 시나리오

### 시나리오 1: 어르신 음성 주문
1. 주문 방식 선택 (매장/포장)
2. 얼굴 인식으로 나이 판별
3. 어르신 모드 활성화
4. 음성으로 알레르기, 식단, 카테고리 설정
5. 필터링된 메뉴 표시
6. 음성 챗봇으로 메뉴 추천 및 장바구니 관리

### 시나리오 2: 일반 주문
1. 주문 방식 선택 (매장/포장)
2. 얼굴 인식으로 나이 판별
3. 일반 모드로 메뉴 표시
4. 터치로 메뉴 선택 및 장바구니 추가

## 🔒 보안 및 개인정보

- 얼굴 인식 데이터는 로컬에서만 처리
- OpenAI API 키는 환경변수로 관리
- 개인정보 수집하지 않음

## 🐛 문제 해결

### 음성 인식이 안 될 때
1. 마이크 권한 확인
2. 마이크 앞에서 명확하게 발음
3. 배경 소음 최소화

### 음성 출력이 안 될 때
1. 스피커/헤드폰 연결 확인
2. 볼륨 설정 확인
3. pygame 초기화 상태 확인

## 📞 지원 및 문의

프로젝트 관련 문의사항이 있으시면 이슈를 등록해 주세요.

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.